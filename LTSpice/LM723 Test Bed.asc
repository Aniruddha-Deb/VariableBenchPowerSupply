Version 4
SHEET 1 2028 680
WIRE -80 -32 -256 -32
WIRE -16 -32 -80 -32
WIRE 368 -32 -16 -32
WIRE 528 -32 368 -32
WIRE 672 -32 528 -32
WIRE 816 -32 672 -32
WIRE 1808 -32 1056 -32
WIRE 464 -16 432 -16
WIRE 608 -16 464 -16
WIRE 752 -16 608 -16
WIRE 368 0 368 -32
WIRE 528 0 528 -32
WIRE 672 0 672 -32
WIRE 816 0 816 -32
WIRE -80 16 -80 -32
WIRE -16 16 -16 -32
WIRE 1264 32 944 32
WIRE 1568 32 1264 32
WIRE 272 48 112 48
WIRE 304 48 272 48
WIRE 464 48 464 -16
WIRE 608 48 608 -16
WIRE 752 48 752 -16
WIRE 176 96 112 96
WIRE 432 96 432 -16
WIRE 432 96 368 96
WIRE 528 112 528 96
WIRE 672 112 672 96
WIRE 816 112 816 96
WIRE 1056 112 1056 -32
WIRE 1088 112 1056 112
WIRE 1200 112 1168 112
WIRE 1296 112 1200 112
WIRE 1392 112 1376 112
WIRE -256 128 -256 -32
WIRE 144 144 112 144
WIRE 1808 144 1808 -32
WIRE 944 160 944 32
WIRE 1264 160 1264 32
WIRE 1568 160 1568 32
WIRE 1056 176 1056 112
WIRE 1200 176 1200 112
WIRE 1232 176 1200 176
WIRE 1536 176 1488 176
WIRE 288 192 112 192
WIRE 368 192 288 192
WIRE 400 192 368 192
WIRE 528 192 480 192
WIRE 672 192 528 192
WIRE 816 192 672 192
WIRE 1392 192 1392 112
WIRE 1392 192 1296 192
WIRE 1664 192 1600 192
WIRE 1680 192 1664 192
WIRE 1232 208 1200 208
WIRE 1392 208 1392 192
WIRE 1536 208 1392 208
WIRE 288 224 288 192
WIRE 368 224 368 192
WIRE -112 240 -192 240
WIRE -192 256 -192 240
WIRE 1488 256 1488 176
WIRE 288 288 112 288
WIRE 816 288 816 192
WIRE 1056 288 1056 256
WIRE 1056 288 816 288
WIRE 1088 288 1056 288
WIRE 1200 288 1200 208
WIRE 1200 288 1168 288
WIRE 1296 288 1200 288
WIRE 1392 288 1376 288
WIRE 176 400 176 96
WIRE 224 400 176 400
WIRE 1664 400 1664 192
WIRE 1664 400 304 400
WIRE -256 464 -256 208
WIRE -192 464 -192 336
WIRE -192 464 -256 464
WIRE -32 464 -32 336
WIRE -32 464 -192 464
WIRE 144 464 144 144
WIRE 144 464 -32 464
WIRE 368 464 368 304
WIRE 368 464 144 464
WIRE 944 464 944 240
WIRE 944 464 368 464
WIRE 1264 464 1264 224
WIRE 1264 464 944 464
WIRE 1392 464 1392 288
WIRE 1392 464 1264 464
WIRE 1488 464 1488 336
WIRE 1488 464 1392 464
WIRE 1568 464 1568 224
WIRE 1568 464 1488 464
WIRE 1808 464 1808 224
WIRE 1808 464 1568 464
WIRE -32 480 -32 464
FLAG -32 480 0
FLAG 288 192 V_inv
FLAG 1680 192 V_sense
IOPIN 1680 192 Out
FLAG 1808 -32 V_out
IOPIN 1808 -32 Out
FLAG 272 48 V_rout
IOPIN 272 48 Out
SYMBOL LM723 -32 80 R0
SYMATTR InstName U1
SYMBOL voltage -256 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 30
SYMBOL voltage -192 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 4
SYMBOL npn 304 0 R0
SYMATTR InstName Q1
SYMATTR Value TIP122
SYMATTR Prefix X
SYMBOL npn 464 0 R0
SYMATTR InstName Q2
SYMATTR Value 2N3055
SYMBOL npn 608 0 R0
SYMATTR InstName Q3
SYMATTR Value 2N3055
SYMBOL npn 752 0 R0
SYMATTR InstName Q4
SYMATTR Value 2N3055
SYMBOL res 512 96 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res 656 96 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 800 96 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL res 496 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 352 208 R0
SYMATTR InstName R7
SYMATTR Value 3.2k
SYMBOL cap 272 224 R0
WINDOW 3 26 47 Left 2
SYMATTR Value 100p
SYMATTR InstName C1
SYMBOL Opamps/opamp2 1264 128 R0
WINDOW 0 -20 64 Left 2
WINDOW 3 30 81 Left 2
SYMATTR InstName U2
SYMATTR Value LM358
SYMBOL res 1072 272 R180
WINDOW 0 -90 79 Left 2
WINDOW 3 -21 49 Left 2
SYMATTR InstName R_sense
SYMATTR Value .1
SYMBOL res 1184 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R_a}
SYMBOL res 1184 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R_a}
SYMBOL res 1280 304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value {R_b}
SYMBOL res 1280 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value {R_b}
SYMBOL res 1792 128 R0
SYMATTR InstName R_load
SYMATTR Value 5
SYMBOL Opamps/opamp2 1568 128 R0
WINDOW 0 -22 65 Left 2
WINDOW 3 17 25 Left 2
SYMATTR InstName U3
SYMATTR Value LM358
SYMBOL voltage 1488 240 R0
SYMATTR InstName V3
SYMATTR Value {V_ctrim}
SYMBOL voltage 944 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 6
SYMBOL res 320 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10
TEXT -240 544 Left 2 ;.dc V2 0.5 7 1
TEXT -240 624 Left 2 !.lib TIP122.lib
TEXT -240 584 Left 2 !.inc LM358.sub
TEXT 1120 528 Left 2 !.param R_a 10k\n.param R_b 70k
TEXT 1440 528 Left 2 !.param V_ctrim 1.8V
TEXT -232 512 Left 2 !.tran 1m
LINE Normal 304 128 304 -96 2
LINE Normal 496 128 304 128 2
LINE Normal 496 528 496 128 2
LINE Normal 896 528 896 -80 2
LINE Normal 1424 528 1424 -80 2
LINE Normal 1024 528 1024 -80 2
