Version 4
SHEET 1 2544 836
WIRE -80 -32 -256 -32
WIRE -16 -32 -80 -32
WIRE 272 -32 -16 -32
WIRE 528 -32 272 -32
WIRE 672 -32 528 -32
WIRE 816 -32 672 -32
WIRE 2016 -32 1056 -32
WIRE 272 -16 272 -32
WIRE 464 -16 432 -16
WIRE 608 -16 464 -16
WIRE 752 -16 608 -16
WIRE -256 0 -256 -32
WIRE 528 0 528 -32
WIRE 672 0 672 -32
WIRE 816 0 816 -32
WIRE -80 16 -80 -32
WIRE -16 16 -16 -32
WIRE 208 32 128 32
WIRE 1264 32 944 32
WIRE 1440 32 1264 32
WIRE 1568 32 1440 32
WIRE 1792 32 1568 32
WIRE 128 48 128 32
WIRE 128 48 112 48
WIRE 464 48 464 -16
WIRE 608 48 608 -16
WIRE 752 48 752 -16
WIRE 432 80 432 -16
WIRE 432 80 272 80
WIRE 128 96 112 96
WIRE 272 96 208 96
WIRE 1440 96 1440 32
WIRE 528 112 528 96
WIRE 672 112 672 96
WIRE 816 112 816 96
WIRE 1056 112 1056 -32
WIRE 1088 112 1056 112
WIRE 1200 112 1168 112
WIRE 1296 112 1200 112
WIRE 1392 112 1376 112
WIRE -256 128 -256 80
WIRE 240 144 112 144
WIRE 2016 144 2016 -32
WIRE 944 160 944 32
WIRE 1264 160 1264 32
WIRE 1568 160 1568 32
WIRE 1792 160 1792 32
WIRE 1056 176 1056 112
WIRE 1200 176 1200 112
WIRE 1232 176 1200 176
WIRE 1536 176 1488 176
WIRE 1760 176 1728 176
WIRE 160 192 112 192
WIRE 304 192 160 192
WIRE 528 192 384 192
WIRE 672 192 528 192
WIRE 816 192 672 192
WIRE 1392 192 1392 112
WIRE 1392 192 1296 192
WIRE 1664 192 1600 192
WIRE 1744 192 1664 192
WIRE 1888 192 1824 192
WIRE 1232 208 1200 208
WIRE 1392 208 1392 192
WIRE 1536 208 1392 208
WIRE 1744 208 1744 192
WIRE 1760 208 1744 208
WIRE 160 224 160 192
WIRE -112 240 -192 240
WIRE 1888 240 1888 192
WIRE -192 256 -192 240
WIRE 1440 256 1440 176
WIRE 304 272 304 192
WIRE 160 288 112 288
WIRE 672 288 672 192
WIRE 1056 288 1056 256
WIRE 1056 288 672 288
WIRE 1088 288 1056 288
WIRE 1200 288 1200 208
WIRE 1200 288 1168 288
WIRE 1296 288 1200 288
WIRE 1392 288 1376 288
WIRE 1488 304 1488 176
WIRE 1888 368 1888 320
WIRE 272 400 272 96
WIRE 1632 400 272 400
WIRE 1664 400 1664 192
WIRE 1664 400 1632 400
WIRE -256 464 -256 208
WIRE -192 464 -192 336
WIRE -192 464 -256 464
WIRE -32 464 -32 336
WIRE -32 464 -192 464
WIRE 240 464 240 144
WIRE 240 464 -32 464
WIRE 304 464 304 352
WIRE 304 464 240 464
WIRE 944 464 944 240
WIRE 944 464 304 464
WIRE 1264 464 1264 224
WIRE 1264 464 944 464
WIRE 1392 464 1392 288
WIRE 1392 464 1264 464
WIRE 1440 464 1440 336
WIRE 1440 464 1392 464
WIRE 1568 464 1568 224
WIRE 1568 464 1440 464
WIRE 1728 464 1728 176
WIRE 1728 464 1568 464
WIRE 1792 464 1792 224
WIRE 1792 464 1728 464
WIRE 1888 464 1888 432
WIRE 1888 464 1792 464
WIRE 2016 464 2016 224
WIRE 2016 464 1888 464
WIRE -32 480 -32 464
FLAG -32 480 0
FLAG 160 192 V_inv
FLAG 2016 -32 V_out
IOPIN 2016 -32 Out
FLAG 1632 400 V_sense
IOPIN 1632 400 Out
SYMBOL LM723 -32 80 R0
SYMATTR InstName U1
SYMBOL voltage -256 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 24
SYMBOL voltage -192 240 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 3
SYMBOL npn 208 -16 R0
SYMATTR InstName Q1
SYMATTR Value TIP122
SYMATTR Prefix X
SYMBOL npn 464 0 R0
SYMATTR InstName Q2
SYMATTR Value 2N3055
SYMBOL npn 608 0 R0
SYMATTR InstName Q3
SYMATTR Value 2N3055
SYMBOL npn 752 0 R0
SYMATTR InstName Q4
SYMATTR Value 2N3055
SYMBOL res 512 96 R0
SYMATTR InstName R2
SYMATTR Value 0.18
SYMBOL res 656 96 R0
SYMATTR InstName R3
SYMATTR Value 0.18
SYMBOL res 800 96 R0
SYMATTR InstName R4
SYMATTR Value 0.18
SYMBOL res 400 176 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 288 256 R0
SYMATTR InstName R7
SYMATTR Value 4.8k
SYMBOL cap 144 224 R0
WINDOW 3 26 47 Left 2
SYMATTR Value 100p
SYMATTR InstName C1
SYMBOL Opamps/opamp2 1264 128 R0
WINDOW 0 -20 64 Left 2
WINDOW 3 30 81 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res 1072 272 R180
WINDOW 0 -90 79 Left 2
WINDOW 3 -21 49 Left 2
SYMATTR InstName R_sense
SYMATTR Value .1
SYMBOL res 1184 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value {R_a}
SYMBOL res 1184 272 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {R_a}
SYMBOL res 1280 304 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R9
SYMATTR Value {R_b}
SYMBOL res 1280 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R10
SYMATTR Value {R_b}
SYMBOL res 2000 128 R0
SYMATTR InstName R_load
SYMATTR Value 5
SYMBOL Opamps/opamp2 1568 128 R0
WINDOW 0 -22 65 Left 2
WINDOW 3 17 25 Left 2
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL voltage 944 144 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V4
SYMATTR Value 12
SYMBOL res 224 80 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100
SYMBOL Opamps/opamp2 1792 128 R0
SYMATTR InstName U4
SYMATTR Value LM324
SYMBOL res 1872 224 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL LED 1872 368 R0
SYMATTR InstName D1
SYMBOL ilim -256 0 R0
SYMATTR InstName U5
SYMATTR Value I=3
SYMATTR Value2 R=0.1
SYMBOL potentiometer 1424 240 R0
SYMATTR InstName U6
SYMATTR Value Rtot=1Meg wiper=0.75
SYMBOL res 1424 80 R0
SYMATTR InstName R12
SYMATTR Value 1Meg
TEXT -600 104 Left 2 !.dc V2 0 7 .1
TEXT -600 184 Left 2 !.lib TIP122.lib\n.lib LM324.ti.lib
TEXT -600 144 Left 2 !.inc LM358.sub
TEXT -608 320 Left 2 !.param R_a 10k\n.param R_b=200k
TEXT -592 64 Left 2 ;.tran 1m
TEXT -600 248 Left 2 !.inc ilim.sub
TEXT -600 280 Left 2 !.inc potentiometer.sub
LINE Normal 400 496 400 -48 2
LINE Normal -128 496 -128 -48 2
LINE Normal 896 496 896 -48 2
LINE Normal 1408 496 1408 -48 2
LINE Normal 1696 496 1696 -48 2
LINE Normal 1968 496 1968 -48 2
